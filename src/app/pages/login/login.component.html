<div class="login-container">
  <div class="login-card">
    <div class="header-box">
      <div class="logo">
        <span class="logo-icon">ğŸ¾</span>
        <span class="logo-text">PADEL MANAGER</span>
      </div>
      <h2>{{ showRecoverForm ? 'Recuperar ContraseÃ±a' : 'Bienvenido de nuevo' }}</h2>
      <p class="subtitle">{{ showRecoverForm ? 'Ingresa tu correo para recibir instrucciones' : 'Ingresa tus
        credenciales para acceder' }}</p>
    </div>

    <!-- Login Form -->
    <div class="form-box" *ngIf="!showRecoverForm && !showProfileSelector">
      <div class="input-group">
        <label>Correo ElectrÃ³nico</label>
        <div class="input-wrapper">
          <input type="email" placeholder="nombre@ejemplo.com" [(ngModel)]="email" (keypress)="handleKeyPress($event)">
          <span class="icon">âœ‰ï¸</span>
        </div>
      </div>

      <div class="input-group">
        <label>ContraseÃ±a</label>
        <div class="input-wrapper">
          <input [type]="showPassword ? 'text' : 'password'" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" [(ngModel)]="password"
            (keypress)="handleKeyPress($event)">
          <span class="toggle-password" (click)="togglePasswordVisibility()">
            {{ showPassword ? 'ğŸ‘ï¸' : 'ğŸ”’' }}
          </span>
        </div>
      </div>

      <div class="actions">
        <label class="checkbox-container">
          <input type="checkbox">
          Recordarme
        </label>
        <a (click)="toggleRecoverMode()" class="forgot-link">Â¿Olvidaste tu contraseÃ±a?</a>
      </div>

      <button class="btn-login" (click)="login()" [disabled]="isLoading">
        <span *ngIf="!isLoading">Iniciar SesiÃ³n</span>
        <span *ngIf="isLoading" class="spinner"></span>
      </button>

      <div *ngIf="error" class="error-message">
        {{ error }}
      </div>

      <div class="register-prompt">
        Â¿No tienes cuenta? <a (click)="goToRegister()">RegÃ­strate aquÃ­</a>
      </div>
    </div>

    <!-- PROFILE SELECTOR -->
    <div class="form-box profile-selector" *ngIf="showProfileSelector">
      <h3>Selecciona un Perfil</h3>
      <p class="subtitle-small">Tienes mÃºltiples roles asociados a esta cuenta.</p>

      <div class="profiles-list">
        <button *ngFor="let p of availableProfiles" class="profile-btn" (click)="selectProfile(p)">
          <div class="p-icon">
            {{ p.rol === 'administrador_club' ? 'ğŸ¢' : (p.rol === 'entrenador' ? 'ğŸ¾' : 'ğŸ‘¤') }}
          </div>
          <div class="p-info">
            <span class="p-club">{{ p.club_nombre || 'Sin Club' }}</span>
            <span class="p-rol">{{ p.rol | titlecase }}</span>
          </div>
          <div class="p-arrow">âœ</div>
        </button>
      </div>

      <div class="register-prompt">
        <a (click)="showProfileSelector = false">Volver</a>
      </div>
    </div>

    <!-- Recovery Form -->
    <div class="form-box" *ngIf="showRecoverForm && !showProfileSelector">
      <div class="input-group">
        <label>Correo ElectrÃ³nico</label>
        <div class="input-wrapper">
          <input type="email" placeholder="nombre@ejemplo.com" [(ngModel)]="recoverEmail">
          <span class="icon">âœ‰ï¸</span>
        </div>
      </div>

      <button class="btn-login" (click)="sendRecovery()" [disabled]="isLoading">
        <span *ngIf="!isLoading">Enviar Instrucciones</span>
        <span *ngIf="isLoading" class="spinner"></span>
      </button>

      <div *ngIf="recoverMessage" class="success-message">
        {{ recoverMessage }}
      </div>

      <div *ngIf="recoverError" class="error-message">
        {{ recoverError }}
      </div>

      <div class="register-prompt">
        <a (click)="toggleRecoverMode()">Volver a Iniciar SesiÃ³n</a>
      </div>
    </div>

    <div class="footer-links">
      <a href="#">Privacidad</a>
      <a href="#">TÃ©rminos</a>
    </div>
  </div>
</div>